<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Romper Frog Demo</title>
</head>
<body>
<div id="romper-target"></div>
<script type="application/json" id="romper-story">
    {
        "story": [
            {
                "id": "74ecc9ed-a4f8-4706-8762-779bd0430fd3",
                "version": "0:0",
                "name": "Make! Craft Britain",
                "beginnings": [
                    {
                        "id": "37580f18-09b1-4993-806c-b4002bc0896c",
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ],
                "narrative_elements": [
                    {
                        "id": "37580f18-09b1-4993-806c-b4002bc0896c",
                        "version": "0:0",
                        "name": "Intro",
                        "description": "Intro sub-story narrative element",
                        "tags": {},
                        "presentation": {
                            "type": "STORY_ELEMENT",
                            "target": "12451533-53b8-4534-be77-7e714d9ca75e"
                        },
                        "links": [
                            {
                                "target": "68cf2acd-0b62-45cc-ac1e-0eddc5c8e571",
                                "condition": {
                                    "==": [
                                        1,
                                        1
                                    ]
                                },
                                "link_type": "NARRATIVE_ELEMENT"
                            }
                    ]
                    },
                    {
                        "id": "68cf2acd-0b62-45cc-ac1e-0eddc5c8e571",
                        "version": "0:0",
                        "name": "MAKE!",
                        "description": "MAKE! sub-story narrative element",
                        "tags": {},
                        "presentation": {
                            "type": "STORY_ELEMENT",
                            "target": "634710e9-1ecd-4652-8ae6-771516cbe548"
                        },
                        "links": [
                            {
                                "target": "67b61c77-35be-45c5-ba73-60dcc74a0bf6",
                                "condition": {
                                    "==": [
                                        1,
                                        1
                                    ]
                                },
                                "link_type": "NARRATIVE_ELEMENT"
                            }
                        ]
                    },
                    {
                        "id": "67b61c77-35be-45c5-ba73-60dcc74a0bf6",
                        "version": "0:0",
                        "name": "Closing credits",
                        "description": "Credits sub-story narrative element",
                        "tags": {},
                        "presentation": {
                            "type": "STORY_ELEMENT",
                            "target": "a3f6756d-bf1f-4b65-b24b-cdfe234898fd"
                        },
                        "links": [
                            {
                                "condition": {
                                    "==": [
                                        1,
                                        1
                                    ]
                                },
                                "link_type": "END_STORY"
                            }
                        ]
                    }
                ]
            },
            {
                "id": "12451533-53b8-4534-be77-7e714d9ca75e",
                "version": "0:0",
                "name": "Make! Craft Britain Introduction",
                "beginnings": [
                    {
                        "id": "d74fc0ec-7ae7-403c-9c88-3a6c30aa7619",
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ],
                "narrative_elements": [
                    {
                        "id": "d74fc0ec-7ae7-403c-9c88-3a6c30aa7619",
                        "version": "0:0",
                        "name": "Title sequence",
                        "description": "Make! Craft Britain opening titles",
                        "tags": {},
                        "presentation": {
                            "type": "PRESENTATION_ELEMENT",
                            "target": "031fdfee-97ae-4257-b15e-002ade70f518"
                        },
                        "links": [
                            {
                                "target": "619f999a-5535-4b05-9f20-9b523033078b",
                                "condition": {
                                    "==": [
                                        1,
                                        1
                                    ]
                                },
                                "link_type": "NARRATIVE_ELEMENT"
                            }
                        ]
                    },
                    {
                        "id": "619f999a-5535-4b05-9f20-9b523033078b",
                        "version": "0:0",
                        "name": "Introduction",
                        "description": "General introduction to programme",
                        "tags": {},
                        "presentation": {
                            "type": "PRESENTATION_ELEMENT",
                            "target": "86f69eca-47a7-4b30-810c-d3f51dd63b9a"
                        },
                        "links": [
                            {
                                "target": "1f07465e-fb57-4b98-a53d-809f125f003f",
                                "condition": {
                                    "==": [
                                        1,
                                        1
                                    ]
                                },
                                "link_type": "NARRATIVE_ELEMENT"
                            }
                        ]
                    },
                    {
                        "id": "1f07465e-fb57-4b98-a53d-809f125f003f",
                        "version": "0:0",
                        "name": "How To Use",
                        "description": "Instructions on how to operate the experience",
                        "tags": {},
                        "presentation": {
                            "type": "PRESENTATION_ELEMENT",
                            "target": "abed0e16-b284-46a2-9a0a-6351aa0215cc"
                        },
                        "links": [
                            {
                                "target": "ed5304f6-b500-478d-b71d-c6632db95cf1",
                                "condition": {
                                    "==": [
                                        1,
                                        1
                                    ]
                                },
                                "link_type": "NARRATIVE_ELEMENT"
                            }
                        ]
                    },
                    {
                        "id": "ed5304f6-b500-478d-b71d-c6632db95cf1",
                        "version": "0:0",
                        "name": "Instructor Introduction",
                        "description": "M!CB expert introduction",
                        "tags": {},
                        "presentation": {
                            "type": "PRESENTATION_ELEMENT",
                            "target": "a04cf27c-8eea-44a7-a67c-5a58abbb6c51"
                        },
                        "links": [
                            {
                                "condition": {
                                    "==": [
                                        1,
                                        1
                                    ]
                                },
                                "link_type": "END_STORY"
                            }
                        ]
                    }
                ]
            },
            {
                "id": "634710e9-1ecd-4652-8ae6-771516cbe548",
                "version": "0:0",
                "name": "Make! Craft Britain Instructions",
                "beginnings": [
                    {
                        "id": "bcc5d7ac-ab45-48a9-8c95-43539bec4a6f",
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ],
                "narrative_elements": [
                    {
                        "id": "bcc5d7ac-ab45-48a9-8c95-43539bec4a6f",
                        "version": "0:0",
                        "name": "Make Step 1",
                        "description": "A description of the first step...",
                        "tags": {},
                        "presentation": {
                            "type": "PRESENTATION_ELEMENT",
                            "target": "c867b2be-f174-4b24-a1fd-33c6104cb16b"
                        },
                        "links": [
                            {
                                "target": "1dd1036a-9a94-41c3-a4c1-5a3c14579a09",
                                "condition": {
                                    "==": [
                                        1,
                                        1
                                    ]
                                },
                                "link_type": "NARRATIVE_ELEMENT"
                            }
                        ]
                    },
                    {
                        "id": "1dd1036a-9a94-41c3-a4c1-5a3c14579a09",
                        "version": "0:0",
                        "name": "Make Step 2",
                        "description": "A description of the second step...",
                        "tags": {},
                        "presentation": {
                            "type": "PRESENTATION_ELEMENT",
                            "target": "27d22c9e-9976-423b-ad32-1eef7ac7b263"
                        },
                        "links": [
                            {
                                "condition": {
                                    "==": [
                                        1,
                                        1
                                    ]
                                },
                                "link_type": "END_STORY"
                            }                            
                        ]
                    }
                ]
            },
            {
                "id": "a3f6756d-bf1f-4b65-b24b-cdfe234898fd",
                "version": "0:0",
                "name": "Make! Craft Britain Closing Credits",
                "beginnings": [
                    {
                        "id": "888c2d3f-9cd8-439c-b558-3e498bf7d424",
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ],
                "narrative_elements": [
                    {
                        "id": "888c2d3f-9cd8-439c-b558-3e498bf7d424",
                        "version": "0:0",
                        "name": "Closing credits",
                        "description": "...",
                        "tags": {},
                        "presentation": {
                            "type": "PRESENTATION_ELEMENT",
                            "target": "141fdfee-97ae-4257-b15e-002ade70f518"
                        },
                        "links": [
                            {
                                "condition": {
                                    "==": [
                                        1,
                                        1
                                    ]
                                },
                                "link_type": "END_STORY"
                            }
                        ]
                    }
                ]
            }
        ],
        "presentations": [
            {
                "id": "031fdfee-97ae-4257-b15e-002ade70f518",
                "version": "0:0",
                "name": "Title Sequence Presentation Element",
                "tags": {},
                "representations": [
                    {
                        "representation": {
                            "id": "5d65e1f9-41a6-4f0e-aadd-5a1f2c8a2081",
                            "version": "0:0",
                            "name": "Title Sequence Representation",
                            "tags": {},
                            "representation_type": "urn:x-object-based-media:representation-types:simple-av/v1.0",
                            "asset_collection": {
                                "foreground": "cd825485-4de6-4b88-99c0-33e609dcf66e"
                            }
                                    },
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ]
            },
            {
                "id": "86f69eca-47a7-4b30-810c-d3f51dd63b9a",
                "version": "0:0",
                "name": "General Introduction Presentation Element",
                "tags": {},
                "representations": [
                    {
                        "representation": {
                            "id": "9804266b-575b-408f-b693-9e4aadcedada",
                            "version": "0:0",
                            "name": "General Intro Representation",
                            "tags": {},
                            "representation_type": "urn:x-object-based-media:representation-types:simple-av/v1.0",
                            "asset_collection": {
                                "foreground": "cd825485-4de6-4b88-99c0-33e609dcf66e",
                                "background": "d22484f9-da14-484b-8051-71be36b2227f"
                            }
                                    },
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ]
            },
            {
                "id": "abed0e16-b284-46a2-9a0a-6351aa0215cc",
                "version": "0:0",
                "name": "How To Use Tool Presentation Element",
                "tags": {},
                "representations": [
                    {
                        "representation": {
                            "id": "53cc9301-10fd-42a8-ae83-74f1e6354ad2",
                            "version": "0:0",
                            "name": "How to use tool Representation",
                            "tags": {},
                            "representation_type": "urn:x-object-based-media:representation-types:simple-av/v1.0",
                            "asset_collection": {
                                "foreground": "8b06cc58-1ccb-42e1-aeec-4302e817c671",
                                "background": "d22484f9-da14-484b-8051-71be36b2227f"
                            }
                                    },
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ]
            },
            {
                "id": "a04cf27c-8eea-44a7-a67c-5a58abbb6c51",
                "version": "0:0",
                "name": "Instructor Introduction Presentation Element",
                "tags": {},
                "representations": [
                    {
                        "representation": {
                            "id": "a2d19468-9d62-486b-b835-f3f5173482a2",
                            "version": "0:0",
                            "name": "Instructor Introduction Representation",
                            "tags": {},
                            "representation_type": "urn:x-object-based-media:representation-types:simple-av/v1.0",
                            "asset_collection": {
                                "foreground": "94ecd001-b209-4863-9853-b87c78d6aeaa",
                                "background": "d22484f9-da14-484b-8051-71be36b2227f"
                            }
                                    },
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ]
            },
            {
                "id": "c867b2be-f174-4b24-a1fd-33c6104cb16b",
                "version": "0:0",
                "name": "Make Step 1 Presentation Element",
                "tags": {},
                "representations": [
                    {
                        "representation": {
                            "id": "0505ff24-83e6-4e07-9f0b-45f57c010189",
                            "version": "0:0",
                            "name": "Make Step 1 Switchable Presentation Element",
                            "tags": {},
                            "representation_type": "urn:x-object-based-media:representation-types:switchable/v1.0",
                            "asset_collection": {
                                "icon": "8d8b9741-7c7a-4f59-94b8-b53c7d1039a2",
                                "choices": [
                                    {
                                        "id": "8037d1c0-8ea3-4833-9aa8-dd910f3e89f3",
                                        "type": "3a9c1a0c-78ab-4548-b5fe-a8fc18078f21",
                                        "pretty_type": "Frog camera angle"
                                    },
                                    {
                                        "id": "aa7ff82e-5cf2-40bd-b9fb-48d0ed829458",
                                        "type": "3a9c1a0c-78ab-4548-b5fe-a8fc18078f21",
                                        "pretty_type": "Frog camera angle"
                                    },
                                    {
                                        "id": "3d22492b-ec4c-4cc0-80d1-b7f880aff0d5",
                                        "type": "3a9c1a0c-78ab-4548-b5fe-a8fc18078f21",
                                        "pretty_type": "Frog camera angle"
                                    },
                                    {
                                        "id": "91a9bef3-acfd-4aab-ac5b-ac06d0ee4e85",
                                        "type": "3a9c1a0c-78ab-4548-b5fe-a8fc18078f21",
                                        "pretty_type": "Frog camera angle"
                                    }
                                ]
                            }
                                    },
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ]
            },
            {
                "id": "27d22c9e-9976-423b-ad32-1eef7ac7b263",
                "version": "0:0",
                "name": "Make Step 2 Presentation Element",
                "tags": {},
                "representations": [
                    {
                        "representation": {
                            "id": "0505ff24-83e6-4e07-9f0b-45f57c010189",
                            "version": "0:0",
                            "name": "Make Step 2 Switchable Presentation Element",
                            "tags": {},
                            "representation_type": "urn:x-object-based-media:representation-types:switchable/v1.0",
                            "asset_collection": {
                                "icon": "8d8b9741-7c7a-4f59-94b8-b53c7d1039a2",
                                "choices": [
                                    {
                                        "id": "8037d1c0-8ea3-4833-9aa8-dd910f3e89f3",
                                        "type": "3a9c1a0c-78ab-4548-b5fe-a8fc18078f21",
                                        "pretty_type": "Frog camera angle"
                                    },
                                    {
                                        "id": "aa7ff82e-5cf2-40bd-b9fb-48d0ed829458",
                                        "type": "3a9c1a0c-78ab-4548-b5fe-a8fc18078f21",
                                        "pretty_type": "Frog camera angle"
                                    },
                                    {
                                        "id": "3d22492b-ec4c-4cc0-80d1-b7f880aff0d5",
                                        "type": "3a9c1a0c-78ab-4548-b5fe-a8fc18078f21",
                                        "pretty_type": "Frog camera angle"
                                    },
                                    {
                                        "id": "91a9bef3-acfd-4aab-ac5b-ac06d0ee4e85",
                                        "type": "3a9c1a0c-78ab-4548-b5fe-a8fc18078f21",
                                        "pretty_type": "Frog camera angle"
                                    }
                                ]
                            }
                                    },
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ]
            },
            {
                "id": "141fdfee-97ae-4257-b15e-002ade70f518",
                "version": "0:0",
                "name": "Credit Sequence Presentation Element",
                "tags": {},
                "representations": [
                    {
                        "representation": {
                            "id": "5d65e1f9-41a6-4f0e-aadd-5a1f2c8a2081",
                            "version": "0:0",
                            "name": "Credit Sequence Representation",
                            "tags": {},
                            "representation_type": "urn:x-object-based-media:representation-types:simple-av/v1.0",
                            "asset_collection": {
                                "foreground": "cd825485-4de6-4b88-99c0-33e609dcf66e"
                            }
                                    },
                        "condition": {
                            "==": [
                                1,
                                1
                            ]
                        }
                    }
                ]
            }
        ],
        "asset_collections": [
            {
                "id": "d22484f9-da14-484b-8051-71be36b2227f",
                "name": "Looping Background Music",
                "description": "This background music loops throughout the experience and is played under each step of the make",
                "version": "0:0",
                "tags": {},
                "type": "urn:x-object-based-media:asset-collection-types:looping-audio/v1.0",
                "assets": {
                    "audio_src": "urn:x-ipstudio:entity:package:af4dfbe4-5efc-46a8-ab6e-a50b891ec119"
                }
            },
            {
                "id": "cd825485-4de6-4b88-99c0-33e609dcf66e",
                "name": "Title Sequence AV asset collection",
                "description": "",
                "version": "0:0",
                "tags": {},
                "type": "urn:x-object-based-media:asset-collection-types:simpleav/v1.0",
                "assets": {
                    "av_src": "urn:x-ipstudio:entity:package:e9f1e607-4f37-421b-996c-f83ccd4ebc44"
                }
            },
            {
                "id": "cd825485-4de6-4b88-99c0-33e609dcf66e",
                "name": "General Intro AV asset collection",
                "description": "",
                "version": "0:0",
                "tags": {},
                "type": "urn:x-object-based-media:asset-collection-types:simpleav/v1.0",
                "assets": {
                    "av_src": "urn:x-ipstudio:entity:package:07872dcd-85d5-4052-b7b2-39651945ca20"
                }
            },
            {
                "id": "8b06cc58-1ccb-42e1-aeec-4302e817c671",
                "name": "How To Use Tool AV asset collection",
                "description": "",
                "version": "0:0",
                "tags": {},
                "type": "urn:x-object-based-media:asset-collection-types:simpleav/v1.0",
                "assets": {
                    "av_src": "urn:x-ipstudio:entity:package:fdd546af-45bc-4ea2-a0df-6f4fcc27ea39"
                }
            },
            {
                "id": "94ecd001-b209-4863-9853-b87c78d6aeaa",
                "name": "Instructor Introduction AV asset collection",
                "description": "",
                "version": "0:0",
                "tags": {},
                "type": "urn:x-object-based-media:asset-collection-types:simpleav/v1.0",
                "assets": {
                    "av_src": "urn:x-ipstudio:entity:package:0d60bc78-918c-4c5d-8dc0-2d6f898ac1ab"
                }
            },
            {
                "id": "8d8b9741-7c7a-4f59-94b8-b53c7d1039a2",
                "name": "Make Step 1 Camera Angle 1",
                "description": "",
                "version": "0:0",
                "tags": {},
                "type": "urn:x-object-based-media:asset-collection-types:simpleav/v1.0",
                "assets": {
                    "av_src": "urn:x-ipstudio:entity:package:f2f6979f-df5d-4ffb-83da-310a141695ff"
                }
            },
            {
                "id": "fa20bde6-a388-4ec8-a457-ceaecdddcb4d",
                "name": "Make Step 1 Camera Angle 2",
                "description": "",
                "version": "0:0",
                "tags": {},
                "type": "urn:x-object-based-media:asset-collection-types:simpleav/v1.0",
                "assets": {
                    "av_src": "urn:x-ipstudio:entity:package:cf194b5a-eb6a-4a33-a2b3-2d9dc914a039"
                }
            },
            {
                "id": "852bd2f3-3b76-40af-bca6-b266a4c0d22e",
                "name": "Make Step 1 Camera Angle 3",
                "description": "",
                "version": "0:0",
                "tags": {},
                "type": "urn:x-object-based-media:asset-collection-types:simpleav/v1.0",
                "assets": {
                    "av_src": "urn:x-ipstudio:entity:package:9635b63d-8be8-457e-9105-b227b0f4b392"
                }
            },
            {
                "id": "adeb8f74-00d1-45ce-bf92-8328bc66457a",
                "name": "Make Step 1 Image Asset Collection",
                "description": "",
                "version": "0:0",
                "tags": {},
                "type": "urn:x-object-based-media:asset-collection-types:image/v1.0",
                "assets": {
                    "image_src": "urn:x-ipstudio:entity:package:dbadd9db-2752-4490-a280-034fa39fdde7"
                }
            }
        ],
        "state": {
            "isDay": true
        }
    }    
</script>
<script src="dist/romper.browser.js"></script>
<script>
    (function() {
        const config = JSON.parse(document.getElementById('romper-story').textContent);

         let romper = window.Romper.init({
            target: document.getElementById('romper-target'),
            dataResolver: window.Romper.RESOLVERS.FROM_OBJECT(config.state),
            // storyFetcher: () => Promise.resolve(story), //config.story[0]),
            storyFetcher: id => Promise.resolve(
                config.story
                    .filter(storyObject => storyObject.id === id)[0]
            ).then(storyObject => storyObject ? storyObject : Promise.reject('no such story object ' + id)),
            presentationFetcher: id => Promise.resolve(
                config.presentations
                    .filter(presentationObject => presentationObject.id === id)[0]
            ).then(presentationObject => presentationObject ? presentationObject : Promise.reject('no such presentation object ' + id)),
            // narrativeElementFetcher: id => Promise.resolve(
            //     config.narrative_elements
            //         .filter(narrativeElementObject => narrativeElementObject.id === id)[0]
            // ).then(narrativeElementObject => narrativeElementObject ? narrativeElementObject : Promise.reject('no such narrative element object')),
        });

        romper.start('74ecc9ed-a4f8-4706-8762-779bd0430fd3');
    })();
</script>
</body>
</html>
